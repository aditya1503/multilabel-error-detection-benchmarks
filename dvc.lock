schema: '2.0'
stages:
  make_dataset:
    cmd: python src/data/make_dataset.py
    deps:
    - path: src/data/make_dataset.py
      md5: d2afc134bd6cc5723255f475913ea65b
      size: 6438
    params:
      params.yaml:
        dataset_kwargs:
          small:
            n_samples: 5000
            n_features: 3
            n_classes: 4
            n_labels: 2
            length: 500
            allow_unlabeled: true
            sparse: false
            test_size: 0.05
            avg_trace: 0.925
            gamma:
              shape: 2.0
              scale: 0.01
          large:
            n_samples: 25000
            n_features: 10
            n_classes: 24
            n_labels: 3
            length: 500
            allow_unlabeled: true
            sparse: false
            test_size: 0.05
            avg_trace: 0.995
            gamma:
              shape: 2.0
              scale: 0.01
        seeds:
        - 0
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
    outs:
    - path: data/generated
      md5: 1d7d48d11c47b44f3b975f437a73b47c.dir
      size: 120147164
      nfiles: 20
  train:
    cmd: python src/models/train.py
    deps:
    - path: data/generated/
      md5: 1d7d48d11c47b44f3b975f437a73b47c.dir
      size: 120147164
      nfiles: 20
    - path: src/models/train.py
      md5: 905c671b9391367bcd8c0bd7e3f5db5c
      size: 3277
    params:
      params.yaml:
        train:
          cv_n_folds: 5
          seed: 0
    outs:
    - path: data/pred_probs/
      md5: 3a0f2cf81ce130195347b0b3b4aa7e21.dir
      size: 47123240
      nfiles: 20
  score:
    cmd: python src/evaluation/score.py
    deps:
    - path: data/pred_probs/
      md5: 3a0f2cf81ce130195347b0b3b4aa7e21.dir
      size: 47123240
      nfiles: 20
    - path: src/evaluation/
      md5: d5e91ef063aa58e7340f82bab28f3273.dir
      size: 20725
      nfiles: 6
    params:
      params.yaml:
        eval:
          ks:
          - 1
          - 2
          - 3
          - 4
          - 5
          - 10
          - 20
          - 50
          - 100
          temperatures:
          - 0.01
          - 0.1
          - 1
          - 10
          - 100
          alphas:
          - 0.2
          - 0.4
          - 0.5
          - 0.6
          - 0.8
    outs:
    - path: data/scores/results.csv
      md5: aa300f3197f9d80437c2a4031630b9a5
      size: 295526
    - path: data/scores/results_agg.json
      md5: 3c4912b6dffbe049f1c0fcb97ecf422a
      size: 11302
